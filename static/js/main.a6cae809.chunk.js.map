{"version":3,"sources":["components/PostsList/PostsList.tsx","api/api.ts","api/comments.ts","components/PostDetails/getComments.ts","components/NewCommentForm/NewCommentForm.tsx","components/Loader/Loader.tsx","components/PostDetails/PostDetails.tsx","App.tsx","api/posts.ts","index.tsx"],"names":["PostsList","posts","selectedPostId","onSelectedPost","className","map","post","userId","title","id","type","onClick","ENDPOINT","request","url","errorMsg","options","fetch","then","response","ok","Error","status","statusText","json","catch","Response","deleteComment","commentId","method","addComment","postId","name","email","body","headers","JSON","stringify","getComments","funcSetComments","funcSetLoader","getPostComments","console","warn","finally","NewCommentForm","setIsLoading","updateComments","useState","setName","mail","setMail","message","setMessage","handleSubmit","event","a","preventDefault","onSubmit","placeholder","value","onChange","target","disabled","trim","length","Loader","PostDetails","isHide","setIsHide","comments","setComments","isLoading","valueBtn","useMemo","useEffect","removeComment","comment","App","setPosts","setUserId","setSelectedPostId","selectedPost","setSelectedPost","getUserPosts","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a6cae809.chunk.js","sourcesContent":["import './PostsList.scss';\nimport { Post } from '../../types/Post';\n\ninterface Props {\n  posts: Post[];\n  selectedPostId: number;\n  onSelectedPost: (selectedPost: number) => void;\n}\n\nexport const PostsList = ({ posts, selectedPostId, onSelectedPost }: Props) => {\n  return (\n    <div className=\"PostsList\">\n      <h2>Posts:</h2>\n\n      <ul className=\"PostsList__list\" data-cy=\"postDetails\">\n        {posts.map(post => (\n          <li key={post.id} className=\"PostsList__item\">\n            <div>\n              <b>{`[User #${post.userId}]: `}</b>\n              {post.title}\n            </div>\n            {selectedPostId === post.id ? (\n              <button\n                type=\"button\"\n                className=\"PostsList__button button\"\n                onClick={() => onSelectedPost(0)}\n              >\n                Close\n              </button>\n            ) : (\n              <button\n                type=\"button\"\n                className=\"PostsList__button button\"\n                onClick={() => onSelectedPost(post.id)}\n              >\n                Open\n              </button>\n            )}\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n","export const BASE_URL = 'https://mate.academy/students-api';\nexport const ENDPOINT = {\n  posts: '/posts',\n  comments: '/comments',\n};\n\n// eslint-disable-next-line max-len\nexport const request = (url: string, errorMsg: string, options?: {}) => {\n  return fetch(`${BASE_URL}${url}`, options)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(`Error: ${response.status} - ${response.statusText}`);\n      }\n\n      return response.json();\n    })\n    .catch(() => ({\n      Response: 'False',\n      Error: `${errorMsg}`,\n    }));\n};\n","import { Comment } from '../types/Comment';\nimport { ResponseError } from '../types/ResponseError';\nimport { request, ENDPOINT } from './api';\n\n// eslint-disable-next-line max-len\nexport const getPostComments = (postId: number): Promise<Comment[] | ResponseError> => {\n  return request(`${ENDPOINT.comments}?postId=${postId}`, 'Comments is not load');\n};\n\n// eslint-disable-next-line max-len\nexport const deleteComment = (commentId: number): Promise<Comment[] | ResponseError> => {\n  return request(`${ENDPOINT.comments}/${commentId}`, 'Comment did not find', { method: 'DELETE' });\n};\n\nexport const addComment = (\n  postId: number,\n  name: string,\n  email: string,\n  body: string,\n): Promise<Comment[]> => {\n  return request(ENDPOINT.comments, 'Comment did not add', {\n    method: 'POST',\n    headers: {\n      'content-type': 'application/json; charset=utf-8',\n    },\n    body: JSON.stringify({\n      postId,\n      name,\n      email,\n      body,\n    }),\n  });\n};\n","import { getPostComments } from '../../api/comments';\nimport { Comment } from '../../types/Comment';\n\nexport function getComments(\n  postId: number,\n  funcSetComments: (comments: Comment[]) => void,\n  funcSetLoader: (value: boolean) => void,\n) {\n  getPostComments(postId).then(response => {\n    if ('Error' in response) {\n      console.warn(response.Error); // eslint-disable-line\n    } else {\n      funcSetComments(response);\n    }\n  }).finally(() => funcSetLoader(false));\n}\n","import {\n  Dispatch, FormEvent, SetStateAction, useState,\n} from 'react';\nimport './NewCommentForm.scss';\nimport { Comment } from '../../types/Comment';\nimport { addComment } from '../../api/comments';\nimport { getComments } from '../PostDetails/getComments';\n\ninterface Props {\n  postId: number;\n  setIsLoading: (isLoading: boolean) => void;\n  updateComments: Dispatch<SetStateAction<Comment[]>>;\n}\n\nexport const NewCommentForm = (\n  { postId, setIsLoading, updateComments }: Props,\n) => {\n  const [name, setName] = useState('');\n  const [mail, setMail] = useState('');\n  const [message, setMessage] = useState('');\n\n  const handleSubmit = async (event: FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n\n    setIsLoading(true);\n\n    await addComment(postId, name, mail, message);\n\n    getComments(postId, updateComments, setIsLoading);\n\n    setName('');\n    setMail('');\n    setMessage('');\n  };\n\n  return (\n    <form className=\"NewCommentForm\" onSubmit={handleSubmit}>\n      <div className=\"form-field\">\n        <input\n          type=\"text\"\n          name=\"name\"\n          placeholder=\"Your name\"\n          className=\"NewCommentForm__input\"\n          value={name}\n          onChange={({ target }) => setName(target.value)}\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <input\n          type=\"text\"\n          name=\"email\"\n          placeholder=\"Your email\"\n          className=\"NewCommentForm__input\"\n          value={mail}\n          onChange={({ target }) => setMail(target.value)}\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <textarea\n          name=\"body\"\n          placeholder=\"Type comment here\"\n          className=\"NewCommentForm__input\"\n          value={message}\n          onChange={({ target }) => setMessage(target.value)}\n        />\n      </div>\n\n      <button\n        type=\"submit\"\n        className=\"NewCommentForm__submit-button button\"\n        disabled={name.trim().length === 0\n          || mail.trim().length === 0\n          || message.trim().length === 0}\n      >\n        Add a comment\n      </button>\n    </form>\n  );\n};\n","import React from 'react';\nimport './Loader.scss';\n\nexport const Loader: React.FC = () => (\n  <div className=\"Loader\">\n    <div className=\"Loader__content\" />\n  </div>\n);\n","import { useEffect, useMemo, useState } from 'react';\nimport { NewCommentForm } from '../NewCommentForm';\nimport './PostDetails.scss';\nimport { Post } from '../../types/Post';\nimport { Comment } from '../../types/Comment';\nimport { deleteComment } from '../../api/comments';\nimport { Loader } from '../Loader';\nimport { getComments } from './getComments';\n\ninterface Props {\n  post: Post;\n  postId: number;\n}\n\nexport const PostDetails = ({ post, postId }: Props) => {\n  const [isHide, setIsHide] = useState(false);\n  const [comments, setComments] = useState<Comment[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const valueBtn = useMemo(() => {\n    const value = `${comments.length} comment${comments.length > 1 ? 's' : ''}`;\n\n    if (isHide) {\n      return `Show ${value}`;\n    }\n\n    return `Hide ${value}`;\n  }, [isHide, comments]);\n\n  useEffect(() => {\n    getComments(postId, setComments, setIsLoading);\n  }, [postId]);\n\n  const removeComment = async (commentId: number) => {\n    setIsLoading(true);\n\n    await deleteComment(commentId);\n\n    getComments(postId, setComments, setIsLoading);\n  };\n\n  return (\n    <div className=\"PostDetails\">\n      <h2>Post details:</h2>\n\n      <section className=\"PostDetails__post\">\n        <p>{post.body}</p>\n      </section>\n\n      {isLoading ? (\n        <Loader />\n      ) : (\n        <section className=\"PostDetails__comments\">\n          {!isHide ? (\n            <button\n              type=\"button\"\n              className=\"button\"\n              onClick={() => setIsHide(true)}\n            >\n              {valueBtn}\n            </button>\n          ) : (\n            <button\n              type=\"button\"\n              className=\"button\"\n              onClick={() => setIsHide(false)}\n            >\n              {valueBtn}\n            </button>\n          )}\n\n          {!isHide && (\n            <ul className=\"PostDetails__list\" data-cy=\"postList\">\n              {comments.map(comment => (\n                <li key={comment.id} className=\"PostDetails__list-item\">\n                  <button\n                    type=\"button\"\n                    className=\"PostDetails__remove-button button\"\n                    onClick={() => removeComment(comment.id)}\n                  >\n                    X\n                  </button>\n                  <p>{comment.body}</p>\n                </li>\n              ))}\n            </ul>\n          )}\n        </section>\n      )}\n\n      <section>\n        <div className=\"PostDetails__form-wrapper\">\n          <NewCommentForm\n            postId={postId}\n            setIsLoading={setIsLoading}\n            updateComments={setComments}\n          />\n        </div>\n      </section>\n    </div>\n  );\n};\n","import React, { useEffect, useState } from 'react';\nimport './App.scss';\nimport './styles/general.scss';\nimport { PostsList } from './components/PostsList';\nimport { PostDetails } from './components/PostDetails';\nimport { Post } from './types/Post';\nimport { getPostDetails, getUserPosts } from './api/posts';\n\nconst App: React.FC = () => {\n  const [posts, setPosts] = useState<Post[]>([]);\n  const [userId, setUserId] = useState(0);\n  const [selectedPostId, setSelectedPostId] = useState<number>(0);\n  const [selectedPost, setSelectedPost] = useState<Post | null>(null);\n\n  useEffect(() => {\n    getUserPosts(userId).then(response => {\n      if ('Error' in response) {\n        console.warn(response.Error); // eslint-disable-line\n      } else {\n        setPosts(response);\n      }\n    });\n  }, [userId]);\n\n  useEffect(() => {\n    getPostDetails(selectedPostId).then(response => {\n      if ('Error' in response) {\n        console.warn(response.Error); // eslint-disable-line\n      } else {\n        setSelectedPost(response);\n      }\n    });\n  }, [selectedPostId]);\n\n  return (\n    <div className=\"App\">\n      <header className=\"App__header\">\n        <label>\n          Select a user: &nbsp;\n\n          <select\n            className=\"App__user-selector\"\n            value={userId}\n            onChange={({ target }) => setUserId(+target.value)}\n          >\n            <option value=\"0\">All users</option>\n            <option value=\"1\">Leanne Graham</option>\n            <option value=\"2\">Ervin Howell</option>\n            <option value=\"3\">Clementine Bauch</option>\n            <option value=\"4\">Patricia Lebsack</option>\n            <option value=\"5\">Chelsey Dietrich</option>\n            <option value=\"6\">Mrs. Dennis Schulist</option>\n            <option value=\"7\">Kurtis Weissnat</option>\n            <option value=\"8\">Nicholas Runolfsdottir V</option>\n            <option value=\"9\">Glenna Reichert</option>\n            <option value=\"10\">Leanne Graham</option>\n          </select>\n        </label>\n      </header>\n\n      <main className=\"App__main\">\n        <div className=\"App__sidebar\">\n          <PostsList\n            posts={posts}\n            selectedPostId={selectedPostId}\n            onSelectedPost={setSelectedPostId}\n          />\n        </div>\n\n        {selectedPostId !== 0 && selectedPost && (\n          <div className=\"App__content\">\n            <PostDetails post={selectedPost} postId={selectedPostId} />\n          </div>\n        )}\n      </main>\n    </div>\n  );\n};\n\nexport default App;\n","import { Post } from '../types/Post';\nimport { ResponseError } from '../types/ResponseError';\nimport { request, ENDPOINT } from './api';\n\n// eslint-disable-next-line max-len\nexport const getUserPosts = (userId = 0): Promise<Post[] | ResponseError> => {\n  const url = userId === 0\n    ? `${ENDPOINT.posts}`\n    : `${ENDPOINT.posts}?userId=${userId}`;\n\n  return request(url, 'Posts is not load');\n};\n\n// eslint-disable-next-line max-len\nexport const getPostDetails = (postId: number): Promise<Post | ResponseError> => {\n  return request(`${ENDPOINT.posts}/${postId}`, 'Post did not find');\n};\n","import ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}